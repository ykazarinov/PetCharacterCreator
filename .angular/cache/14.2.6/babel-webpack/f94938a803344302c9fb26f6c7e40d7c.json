{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/global-sevice.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../safe-html.pipe\";\n\nfunction PartComponent_li_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PartComponent_li_0_ng_container_2_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 12);\n    i0.ɵɵpipe(1, \"safeHtml\");\n  }\n\n  if (rf & 2) {\n    const my_non_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 1, my_non_r3), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction PartComponent_li_0_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, PartComponent_li_0_ng_container_2_span_1_Template, 2, 3, \"span\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.one_part.categ_id != 30);\n  }\n}\n\nfunction PartComponent_li_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 1);\n    i0.ɵɵlistener(\"click\", function PartComponent_li_0_Template_li_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      ctx_r6.choose_detail();\n      return i0.ɵɵresetView(ctx_r6.globalService.verifActivePart());\n    });\n    i0.ɵɵtemplate(1, PartComponent_li_0_div_1_Template, 2, 0, \"div\", 2);\n    i0.ɵɵtemplate(2, PartComponent_li_0_ng_container_2_Template, 2, 1, \"ng-container\", 3);\n    i0.ɵɵelement(3, \"div\", 4);\n    i0.ɵɵpipe(4, \"safeHtml\");\n    i0.ɵɵelement(5, \"div\", 5);\n    i0.ɵɵpipe(6, \"safeHtml\");\n    i0.ɵɵelement(7, \"div\", 6);\n    i0.ɵɵpipe(8, \"safeHtml\");\n    i0.ɵɵelement(9, \"div\", 7);\n    i0.ɵɵpipe(10, \"safeHtml\");\n    i0.ɵɵelement(11, \"div\", 8);\n    i0.ɵɵpipe(12, \"safeHtml\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", ctx_r0.one_part.css_part_active === true);\n    i0.ɵɵattribute(\"locked\", ctx_r0.one_part.locked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.one_part.locked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.non_svg);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(4, 10, ctx_r0.one_part.layer_1_code_bg), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(6, 12, ctx_r0.one_part.layer_2_code_white), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(8, 14, ctx_r0.one_part.layer_2_code_outline), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(10, 16, ctx_r0.one_part.layer_3_code_speccol), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(12, 18, ctx_r0.one_part.layer_4_code_glare), i0.ɵɵsanitizeHtml);\n  }\n}\n\nexport let PartComponent = /*#__PURE__*/(() => {\n  class PartComponent {\n    constructor(globalService) {\n      this.globalService = globalService; // this.actual_categ_id = globalService.actual_categ_id;\n\n      this.non_svg = globalService.non_changeable_parts_svg; //  console.log(\"this.actual_categ_id \" + this.actual_categ_id);\n    }\n\n    ngOnInit() {\n      if (this.one_part.default === 1) {\n        this.one_part.css_part_active = true;\n      } else {\n        this.one_part.css_part_active = false;\n      }\n    }\n\n    active_detail() {\n      let new_categ_id = this.one_part.categ_id; // выделяем css активную деталь\n\n      if (this.one_part.css_part_active === false) {\n        for (let i in this.globalService.parts) {\n          if (this.globalService.parts[i].categ_id === new_categ_id) {\n            this.globalService.parts[i].css_part_active = false; // все детали делаем неактивными\n          }\n        }\n\n        this.one_part.css_part_active = true; // кликуемую деталь делаем активной\n      }\n    }\n\n    choose_detail() {\n      let new_categ_id = this.one_part.categ_id;\n      let main_categ_part;\n      let existPartsOfCateg = false;\n      let main_part_index;\n\n      for (let i in this.globalService.myAnimal.my_parts) {\n        // найти индекс запчасти в готовом животном из той же категории, что и текущая деталь:\n        if (this.globalService.myAnimal.my_parts[i].categ_id == new_categ_id) {\n          main_categ_part = i;\n          existPartsOfCateg = true;\n        } // найти индекс запчасти в готовом животном с тем же id что и кликаемая деталь\n\n\n        if (this.globalService.myAnimal.my_parts[i].id == this.one_part.id) {\n          main_part_index = i;\n        }\n      } //===================\n\n\n      if (this.one_part.required_detail === 1) {\n        // Если добавляемая деталь является обязательной\n        this.globalService.myAnimal.my_parts[main_categ_part] = this.one_part;\n        this.active_detail();\n      } else {\n        // если добавляемая деталь Не является обязательной\n        if (this.one_part.subjoin != 1) {\n          // если деталь не является добавляемой\n          if (this.one_part.css_part_active == false) {\n            // если кликается ещё не выбранная деталь\n            if (existPartsOfCateg === false) {\n              // если среди частей ещё не выбрана ни одна\n              this.globalService.myAnimal.my_parts.push(this.one_part);\n              this.active_detail();\n            } else {\n              // если среди запчастей уже выбрана запчасть данной категории\n              this.globalService.myAnimal.my_parts[main_categ_part] = this.one_part;\n              this.active_detail();\n            }\n          } else {\n            // если кликается уже выбранная деталь\n            this.globalService.myAnimal.my_parts.splice(main_categ_part, 1);\n            this.one_part.css_part_active = false;\n          }\n        } else {\n          // если деталь является добавляемой\n          if (this.one_part.css_part_active == false) {\n            // если кликается ещё не выбранная деталь\n            this.globalService.myAnimal.my_parts.push(this.one_part);\n            this.one_part.css_part_active = true;\n          } else {\n            // если кликается уже выбранная деталь\n            this.globalService.myAnimal.my_parts.splice(main_part_index, 1);\n            this.one_part.css_part_active = false;\n          }\n        }\n      }\n    } // конец процедуры choose_detail\n\n\n  }\n\n  PartComponent.ɵfac = function PartComponent_Factory(t) {\n    return new (t || PartComponent)(i0.ɵɵdirectiveInject(i1.GlobalSeviceService));\n  };\n\n  PartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PartComponent,\n    selectors: [[\"app-part\"]],\n    inputs: {\n      one_part: \"one_part\",\n      cont_categ_id: \"cont_categ_id\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"podcat\", 3, \"active\", \"click\", 4, \"ngIf\"], [1, \"podcat\", 3, \"click\"], [\"class\", \"lock_img_cont\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"svg_cont\", \"normal_part\", \"layer_1\", 3, \"innerHTML\"], [1, \"svg_cont\", \"normal_part\", \"layer_2\", 3, \"innerHTML\"], [1, \"svg_cont\", \"normal_part\", \"layer_3\", 3, \"innerHTML\"], [1, \"svg_cont\", \"normal_part\", \"layer_4\", 3, \"innerHTML\"], [1, \"svg_cont\", \"normal_part\", \"layer_5\", 3, \"innerHTML\"], [1, \"lock_img_cont\"], [\"src\", \"../assets/img/lock.png\"], [\"class\", \"svg_cont non_change_parts\", 3, \"innerHTML\", 4, \"ngIf\"], [1, \"svg_cont\", \"non_change_parts\", 3, \"innerHTML\"]],\n    template: function PartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, PartComponent_li_0_Template, 13, 20, \"li\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.one_part.active);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.SafeHtmlPipe],\n    styles: [\".podcat[_ngcontent-%COMP%]{width:calc(50% - 1rem - 8px);height:5rem;background-image:url(/../assets/img/wood_square_bg.png);background-position:left top;background-size:cover;background-repeat:no-repeat;border-radius:5px;margin:.5rem;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;z-index:1000}.podcat[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.podcat[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:50%;height:auto}.podcat[disabled=disabled][_ngcontent-%COMP%]{pointer-events:none;filter:grayscale(1) blur(1px)}.podcat[locked=lock][_ngcontent-%COMP%]{pointer-events:none}.podcat[locked=lock][_ngcontent-%COMP%]   .lock_img_cont[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-self:stretch;justify-content:center;align-items:center;position:absolute;z-index:100;background-color:#00000080}.podcat[locked=lock][_ngcontent-%COMP%]   .lock_img_cont[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%;object-fit:cover}.podcat.active[_ngcontent-%COMP%]{background-image:none;background-color:#fff}.podcat.active[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(1)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#727272}.podcat.active[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(2)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#fff}.podcat.active[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(3)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#000}.podcat.active[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(4)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#ff75a8}.podcat.active[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(5)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#fff}.podcat.active[_ngcontent-%COMP%]   .svg_cont.non_change_parts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#ccc}.podcat[_ngcontent-%COMP%]   .svg_cont[_ngcontent-%COMP%]{position:absolute}.podcat[_ngcontent-%COMP%]   .svg_cont[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:130%;margin-left:-20%}.podcat[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(1)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#727272}.podcat[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(2)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#fff}.podcat[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(3)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#000}.podcat[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(4)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#ff75a8}.podcat[_ngcontent-%COMP%]   .svg_cont.normal_part[_ngcontent-%COMP%]:nth-of-type(5)   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#fff}.podcat[_ngcontent-%COMP%]   .svg_cont.non_change_parts[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]{fill:#ccc}\"]\n  });\n  return PartComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}