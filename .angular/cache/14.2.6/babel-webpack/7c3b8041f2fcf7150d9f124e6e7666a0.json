{"ast":null,"code":"import { ChangeDetectorRef } from '@angular/core';\nimport { ColWinComponent } from '../col-win/col-win.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/global-sevice.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"../parts-category/parts-category.component\";\nimport * as i7 from \"../part/part.component\";\nimport * as i8 from \"../pet/pet.component\";\nimport * as i9 from \"../heder-title/heder-title.component\";\nimport * as i10 from \"../dialog-win/dialog-win.component\";\n\nfunction ConstructorPageComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelement(1, \"img\", 18);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ConstructorPageComponent_app_parts_category_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-parts-category\", 19);\n  }\n\n  if (rf & 2) {\n    const categ_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"one_category\", categ_r5);\n  }\n}\n\nfunction ConstructorPageComponent_ul_17_ng_container_5_app_part_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-part\", 24);\n  }\n\n  if (rf & 2) {\n    const part_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"one_part\", part_r8);\n  }\n}\n\nfunction ConstructorPageComponent_ul_17_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ConstructorPageComponent_ul_17_ng_container_5_app_part_1_Template, 1, 1, \"app-part\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const part_r8 = ctx.$implicit;\n    const categ2_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", part_r8.categ_id === categ2_r6.id);\n  }\n}\n\nfunction ConstructorPageComponent_ul_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ul\", 20)(1, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ConstructorPageComponent_ul_17_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const categ2_r6 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      ctx_r12.openDialog();\n      return i0.ɵɵresetView(ctx_r12.main_color(categ2_r6.id));\n    });\n    i0.ɵɵelement(2, \"img\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ConstructorPageComponent_ul_17_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const categ2_r6 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      ctx_r14.openDialog();\n      return i0.ɵɵresetView(ctx_r14.spec_color(categ2_r6.id));\n    });\n    i0.ɵɵelement(4, \"img\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ConstructorPageComponent_ul_17_ng_container_5_Template, 2, 1, \"ng-container\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const categ2_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"hide\", !categ2_r6.css_categ_active);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"disabled\", !ctx_r3.globalService.main_color_btn_active);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r3.globalService.color_icons[1], i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"disabled\", !ctx_r3.globalService.spec_color_btn_active);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r3.globalService.color_icons[2], i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.globalService.parts);\n  }\n}\n\nfunction ConstructorPageComponent_app_pet_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-pet\", 24);\n  }\n\n  if (rf & 2) {\n    const my_part_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"one_part\", my_part_r15);\n  }\n}\n/**\n * @title Dialog with header, scrollable content and actions\n */\n// declare var M: any;\n\n\nexport let ConstructorPageComponent = /*#__PURE__*/(() => {\n  class ConstructorPageComponent {\n    constructor(globalService, dialog, cd, router) {\n      this.globalService = globalService;\n      this.dialog = dialog;\n      this.cd = cd;\n      this.router = router; // @Input() colorWinHide = true; \n      // @ViewChild('modal') modal: ElementRef;\n\n      this.loading = false;\n    }\n\n    ngOnInit() {\n      this.transferConstructorData(this.globalService.myAnimal.animal_id, this.globalService.myAnimal.gender_id);\n    }\n\n    ngDoCheck() {\n      this.page_url = this.router.url.slice(1);\n      this.currentPageButton = this.globalService.nextPageBtnText(this.page_url);\n    }\n\n    ngAfterViewInit() {// this.globalService.verifActivePart();\n    }\n\n    ngOnChanges() {}\n\n    ngAfterViewChecked() {\n      setTimeout(() => {\n        this.globalService.verifActivePart();\n      });\n    }\n\n    openDialog() {\n      const dialogRef = this.dialog.open(ColWinComponent, {\n        height: 'calc(100% - 3rem)',\n        width: 'calc(100% - 3rem)'\n      });\n    }\n\n    transferConstructorData(anim_id, gender_id) {\n      this.loading = true;\n      this.globalService.loadCategoriesAndParts(anim_id, gender_id).subscribe(response => {\n        this.globalService.constructor_resp = response;\n        console.log(response);\n        this.globalService.categories = this.globalService.constructor_resp.constructor_page['categ_parts'];\n        this.globalService.parts = this.globalService.constructor_resp.constructor_page['parts'];\n        this.globalService.color_icons = this.globalService.constructor_resp.constructor_page['color_icons'];\n        this.globalService.colors_hues = this.globalService.constructor_resp.constructor_page['colors_hues'];\n        this.globalService.colors_luminosity = this.globalService.constructor_resp.constructor_page['colors_luminosities'];\n        this.globalService.colors = this.globalService.constructor_resp.constructor_page['colors'];\n        let j;\n        let i = 0;\n\n        for (j in this.globalService.categories) {\n          if (this.globalService.categories[j].changeable) {\n            i++;\n\n            if (i === 1) {\n              this.globalService.categories[j].css_categ_active = true;\n            } else {\n              this.globalService.categories[j].css_categ_active = false;\n            }\n          }\n        } // сохраняем текущие детали в локальную переменную  myAnimalParts\n\n\n        let k;\n        let l = 0;\n        let myAnimalParts = [];\n\n        for (k in this.globalService.parts) {\n          if (!this.globalService.parts[k].changeable || this.globalService.parts[k].default) {\n            l++;\n            myAnimalParts[l] = this.globalService.parts[k];\n          }\n        } // загоняем локальную переменную в this.globalService.myAnimal.my_parts + \n        // преобразовываем объект в массив\n\n\n        for (let key in myAnimalParts) {\n          if (myAnimalParts.hasOwnProperty(key)) {\n            this.globalService.myAnimal.my_parts.push(myAnimalParts[key]);\n          }\n        }\n\n        this.loading = false; // this.globalService.myAnimal.bg_color = this.globalService.myAnimal.my_parts[0].bg_color_default;\n        // this.globalService.myAnimal.spec_color = this.globalService.myAnimal.my_parts[0].spec_color_default;\n\n        console.log('myAnimal', this.globalService.myAnimal);\n      });\n    }\n\n    body_color() {\n      this.globalService.choose_color_type = 1;\n    }\n\n    main_color(categ2) {\n      this.globalService.choose_color_type = 2;\n      this.globalService.categ_id_for_color = categ2;\n    }\n\n    spec_color(categ2) {\n      this.globalService.choose_color_type = 3;\n      this.globalService.categ_id_for_color = categ2;\n    }\n\n  }\n\n  ConstructorPageComponent.ɵfac = function ConstructorPageComponent_Factory(t) {\n    return new (t || ConstructorPageComponent)(i0.ɵɵdirectiveInject(i1.GlobalSeviceService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  ConstructorPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ConstructorPageComponent,\n    selectors: [[\"app-constructor-page\"]],\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 20,\n    vars: 7,\n    consts: [[1, \"next_btn\", 3, \"routerLink\"], [\"id\", \"loadingDiv\", 4, \"ngIf\"], [\"id\", \"animal\", 1, \"animal_allpage\"], [1, \"animal_page\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col\", \"m2\", \"s12\", \"categ_cont\"], [1, \"tablist-left\", \"categ_tabs\"], [\"mat-button\", \"\", 1, \"bodyColorBtn\", 3, \"click\"], [3, \"src\"], [3, \"one_category\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"modal1\", 1, \"modal\"], [\"modal\", \"\"], [1, \"col\", \"m4\", \"s12\", \"parts_groups_cont\"], [\"class\", \"part_cont\", 3, \"hide\", 4, \"ngFor\", \"ngForOf\"], [1, \"col\", \"m6\", \"s12\", \"image\"], [3, \"one_part\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"loadingDiv\"], [\"src\", \"assets/img/loader.gif\"], [3, \"one_category\"], [1, \"part_cont\"], [\"mat-button\", \"\", 1, \"podcat\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [3, \"one_part\", 4, \"ngIf\"], [3, \"one_part\"]],\n    template: function ConstructorPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-heder-title\");\n        i0.ɵɵelementStart(1, \"a\", 0);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, ConstructorPageComponent_div_3_Template, 2, 0, \"div\", 1);\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"div\", 4)(7, \"div\", 5)(8, \"div\", 6)(9, \"ul\", 7)(10, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function ConstructorPageComponent_Template_button_click_10_listener() {\n          ctx.openDialog();\n          return ctx.body_color();\n        });\n        i0.ɵɵelement(11, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(12, ConstructorPageComponent_app_parts_category_12_Template, 1, 1, \"app-parts-category\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 11, 12);\n        i0.ɵɵelement(15, \"app-dialog-win\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 13);\n        i0.ɵɵtemplate(17, ConstructorPageComponent_ul_17_Template, 6, 9, \"ul\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 15);\n        i0.ɵɵtemplate(19, ConstructorPageComponent_app_pet_19_Template, 1, 1, \"app-pet\", 16);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"routerLink\", ctx.currentPageButton == null ? null : ctx.currentPageButton.link);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.currentPageButton == null ? null : ctx.currentPageButton.title);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.globalService.color_icons[0], i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.globalService.categories);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.globalService.categories);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.globalService.myAnimal.my_parts);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i3.RouterLinkWithHref, i5.MatButton, i6.PartsCategoryComponent, i7.PartComponent, i8.PetComponent, i9.HederTitleComponent, i10.DialogWinComponent],\n    styles: [\".animal_allpage[_ngcontent-%COMP%]{position:relative}.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:0}@media screen and (orientation: portrait){.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .categ_cont[_ngcontent-%COMP%]   .tablist-left[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:unset;justify-content:flex-start;flex-wrap:nowrap}.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .parts_groups_cont[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;overflow-x:auto;overflow-y:unset;max-height:7rem}.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .parts_groups_cont[_ngcontent-%COMP%]   .part_cont[_ngcontent-%COMP%]{flex-wrap:nowrap}}@media screen and (orientation: landscape){.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .categ_cont[_ngcontent-%COMP%]   .tablist-left[_ngcontent-%COMP%]{overflow-y:scroll;overflow-x:unset;height:calc(100vh - 50px);flex-wrap:wrap;margin-bottom:0;justify-content:center}.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .parts_groups_cont[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;overflow-y:scroll;overflow-x:unset;max-height:calc(100vh - 50px)}}.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .categ_cont[_ngcontent-%COMP%]   .tablist-left[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;box-shadow:none!important;-webkit-box-shadow:none!important;min-width:100%;min-height:3.5rem;display:flex}.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .categ_cont[_ngcontent-%COMP%]   .tablist-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .categ_cont[_ngcontent-%COMP%]   .tablist-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-image:url(/../assets/img/icon_bg.png);background-size:contain;background-repeat:no-repeat;background-position:center;margin:.2rem;border-radius:50%;display:flex;justify-content:center;align-items:center;height:3.5rem;width:3.5rem;border:none}.animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .categ_cont[_ngcontent-%COMP%]   .tablist-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .animal_allpage[_ngcontent-%COMP%]   .animal_page[_ngcontent-%COMP%]   .categ_cont[_ngcontent-%COMP%]   .tablist-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70%;max-height:70%;object-fit:contain}.modal[_ngcontent-%COMP%]{border-radius:.5rem;height:100%;max-height:96%}@media only screen and (max-width: 992px){.modal[_ngcontent-%COMP%]{width:95%}}.podcat[_ngcontent-%COMP%]{width:6rem;height:6rem;background-image:url(/../assets/img/wood_square_bg.png);background-position:left top;background-size:cover;background-repeat:no-repeat;border-radius:5px;margin-top:0;margin-bottom:.5rem;margin-left:.25rem;margin-right:.25rem;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden;z-index:100}.podcat.disabled[_ngcontent-%COMP%]{pointer-events:none;filter:grayscale(1) blur(1px)}.podcat[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:80%;height:auto}\"]\n  });\n  return ConstructorPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}